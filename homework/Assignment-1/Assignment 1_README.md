# Assignment 1

Type: homework
Reviewed: No

# 作业要求

- 提取一段语音的声学特征 (MFCC)。正确注释您的代码。
提交一份报告，简要描述 MFCC 特征提取的过程以及重要的输出数据，例如语音片段的频谱图或 MFCC。
- 处理步骤包括：
    - 预加重
    - 开窗
    - STFT
    - Mel 滤波器组
    - Log()
    - DCT
    - 动态特征提取
    - 特征转换
- 您可以在项目中使用软件包提供的现有 FFT、DCT 和log函数以及绘图函数。其他的功能就需要你自己实现了。项目成果必须是原创的并且是您自己的作品。严禁抄袭。

# 思路研究

---

- 预加重：补偿语音信号高频部分的振幅
    - 按照公式，可以用python切片的小技巧来简化处理错位相减的操作
- 分帧：按照固定的时间长度分割，即为一帧，分割后的最后一帧是分析提取MFCC的样本，而时域波形中的帧是时域尺度上对音频采样而得到的样本
    - 先将N个采样点集合成一个观测单位，通常N取512或256
    - 为避免相邻两帧的变化过大，可以让两相邻帧之间有一段重叠区域，包含了M取样点，一般为N的1/2或1/3
    - 采样频率一般为8kHz或16kHz
    - 在得到总帧数时，使用信号总长度先减去一帧长度，这是因为分帧的时候，最后一帧可能不够帧长，为了为了保证全部信号被处理，先减去一帧除以帧步后向上取整，最后再额外多加一帧，即可保证所有的信号都能被分帧覆盖
    - 而对于最后的一帧需要进行补零操作，首先需得出最后一帧的结束点不超过音频信号的位置，然后在此基础上使用np.append和np.zeros进行补零
    - 计算每一帧的索引操作比较复杂，需要首先创建一个二维数组，每一行都是一帧的索引范围，然后再创建一个二维数组，每一行代表一帧的其实索引，最后将两二维数组相加，即可得到包含每个帧其实和结束索引位置的二维数组
    - 最后根据索引将输入的语音信号提取到每帧中
- 加窗：使用汉明窗，套用公式即可
    - 在实际编程中，发现一个很抽象的问题，在于使用numpy构造的矩阵不能使用math函数来处理，而必须调用numpy自带的cos函数
- STFT：短时傅里叶变换，得到频谱
    - 定义FFT为512，为2的整数次幂即可
    - 直接调用np的FFT函数即可
- Mel滤波：用于提取频谱的能量特征
    - 这里首先将信息的幅度进行平方，便于其频域特性的分析和比较
    - 首先定义最高最低的频率阈值，然后通过公式转换为梅尔频率
    - 在梅尔频率上均匀取26个点（一般性取法），每个滤波器针对两个频率的样点，样点之间会进行重叠处理，因此需要多2两个额外的采样点
    - 滤波器组矩阵按照公式计算即可
    - 计算增益以将频谱信号分成不同的频率带，便于进行后续的MFCC计算
- 动态差分处理
    - 首先计算分母，用于归一化差分特征的之，确保差分特征在计算时被正常缩放
    - 然后对输入特征进行边缘填充，这是由于需要考虑特征序列的前后帧的计算准确性
    - 最后计算差分特征，对每一帧前后共2*N+1帧的特征进行加权求和，权重系数表示了帧的相对位置
- 特征变换函数
    - 这里首先计算出均值和标准差，进行特征的归一化处理，以消除数据不同特征之间的量纲和尺度差异，使得数据在同一数量级上，便于进行综合分析和比较
    - 然后建立PCA类，使用PCA来进行数据的降维操作，保留最重要的信息，减少数据的冗余和噪声，提高数据的质量